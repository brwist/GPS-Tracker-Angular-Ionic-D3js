<ion-header>
  <ion-navbar>
    <ion-title>Charts</ion-title>
  </ion-navbar>
  <ion-toolbar>
    <ion-segment [(ngModel)]="chartType">

      <ion-segment-button
        *ngFor="let type of chartTypes"
        value="{{type.value}}"
      >
        {{type.label}}
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content>

  <div
    *ngIf="!chartData"
    class="loading"
  >
    <ion-spinner></ion-spinner>
  </div>
  <ng-container *ngIf="chartData">
    <p class="chart-title">{{ chartData.title }}</p>
    <canvas
      baseChart
      [datasets]="chartData.dataSets"
      [labels]="chartData.labels"
      [options]="chartData.options"
      [legend]="chartData.legend"
      [colors]="chartData.colors"
      [chartType]="chartData.chartType"
    ></canvas>
  </ng-container>
  <ion-list>

    <button
      ion-item
      detail-none
      (click)="presentDateSettings()"
    >
      {{ dateRangeString }}
    </button>

    <ion-item>
      <ion-label>Max number of points</ion-label>
      <ion-select [(ngModel)]="maxNumberOfPointsValue">
        <ion-option
          *ngFor="let value of [25, 50, 100, 150, 300, 500, 1000, 'All']"
          [value]="value"
        >
          {{ value }}
        </ion-option>
      </ion-select>
    </ion-item>

  </ion-list>

  <ion-list *ngIf="groupedBy">
    <ion-list-header>Grouped by {{ groupedBy }}s (median shown)</ion-list-header>

    <ion-item>
      <h2>Total data points</h2>
      <ion-note item-right>
        {{ pointsTotal }}
      </ion-note>
    </ion-item>

  </ion-list>

  <!-- <chart
    [chartData]="chartData"
    [device]="device"
  >

  </chart> -->

</ion-content>
